<%= render "shared/navbar" %>

<div class="pages-container">
  <%= link_to "Back to all costumes", costumes_path, class: "btn mt-3" %>

  <h1 class="mt-3 show-title"><%= @costume.title.capitalize %></h1>

  <div class="show-grid mt-3">
    <div class="show-card costume-card d-flex">
      <%= cl_image_tag(@costume.photo.key, width: 500, height: 350, crop: :fill, gravity: :face) %>
      <p class="mt-2 p-3"><%= @costume.description %></p>
    </div>

    <div class="show-card booking-card p-3">
      <p><em>Book it now!</em></p>
      <p class="fs-3"> <strong><%= @costume.price.round %>€</strong> per day</p>
      <%= simple_form_for [@costume, @booking] do |f| %>
        <%= f.input :start_date,
                    as: :string,
                    input_html: { data: { controller: "datepicker" } }
        %>
        <%= f.input :end_date,
                    as: :string,
                    input_html: { data: { controller: "datepicker" } }
        %>
        <%= f.submit "Create Booking", class: "btn btn-outline-success" %>
      <% end %>
    </div>
  </div>

  <div class="show-bookings mt-3">
    <h2 class="text-decoration-underline">Your bookings for this costume</h2>
    <div class="d-flex gap-3 mt-3">
      <% @user_bookings.each do |b| %>
        <div class="bg-white p-3">
          <p><em>in <%= (b.start_date - Date.today).to_i %> days!</em></p>
          <p>Start date: <%= b.start_date %></p>
          <p>End date: <%= b.end_date %></p>
          <p>Total Price: <strong><%= b.total_price %>€</strong></p>
        </div>
      <% end %>
    </div>
  </div>
</div>

<%= render "shared/footer" %>
